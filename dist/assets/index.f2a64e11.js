import{d as k,o as _,c as h,a as e,t as g,w,b as B,n as D,e as te,f as se,D as y,i as R,F,r as T,u as I,g as C,p as A,h as E,j as J,k as f,l as x,m as oe,q as H,s as U,v as P,x as G,y as ne,z as ie,A as ae,B as le,C as ce,E as X,G as re,H as de,I as ue}from"./vendor.6f76fdd3.js";const ve=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function t(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerpolicy&&(d.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?d.credentials="include":c.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=t(c);fetch(c.href,d)}};ve();const _e=e("div",{class:"modal-background"},null,-1),he={class:"modal-content"},me={class:"message is-danger is-medium"},pe={key:0,class:"message-header"},ge={class:""},fe={key:1,class:"message-body"},$e=k({props:{showModal:Boolean,modalTitle:String,modalContent:String},emits:["toggleModal"],setup(n){return(o,t)=>(_(),h("div",{class:D(["modal",{"is-active":n.showModal}])},[_e,e("div",he,[e("div",me,[n.modalTitle?(_(),h("div",pe,[e("p",ge,g(n.modalTitle),1),e("button",{class:"delete",onClick:t[0]||(t[0]=w(i=>o.$emit("toggleModal"),["prevent"]))})])):B("",!0),n.modalContent?(_(),h("div",fe,[e("p",null,g(n.modalContent),1)])):B("",!0)])])],2))}}),be={state:{session:{user:null,authenticated:!1}},plugins:[te({storage:sessionStorage})],getters:{getSession(n){return n.session},getCurrentUser(n){return n.session.user},getCurrentUserId(n){return n.session.user?n.session.user.user_id:-1}},mutations:{login(n,o){n.session=o},logout(n){n.session.authenticated=!1}}},p=se(be),ye={class:"level level-left is-mobile"},we=e("div",{class:"icon-text"},[e("span",{class:"icon"},[e("i",{class:"fa-solid fa-fire"})]),e("span",null,"Hot")],-1),xe=[we],ke=e("div",{class:"icon-text"},[e("span",{class:"icon"},[e("i",{class:"fa-solid fa-arrow-up"})]),e("span",null,"Top")],-1),Ce=[ke],Se=e("div",{class:"icon-text"},[e("span",{class:"icon"},[e("i",{class:"fa-solid fa-egg"})]),e("span",null,"New")],-1),Ie=[Se],q=k({emits:["sort"],setup(n){return(o,t)=>(_(),h("div",ye,[e("div",{class:"level-item button has-text-weight-semibold",onClick:t[0]||(t[0]=i=>o.$emit("sort","hot"))},xe),e("div",{class:"level-item button has-text-weight-semibold",onClick:t[1]||(t[1]=i=>o.$emit("sort","top"))},Ce),e("div",{class:"level-item button has-text-weight-semibold",onClick:t[2]||(t[2]=i=>o.$emit("sort","new"))},Ie)]))}});var L=(n,o)=>{const t=n.__vccOpts||n;for(const[i,c]of o)t[i]=c;return t};const Ue={},Pe={class:"box content"},Le=e("h2",null,"Rules",-1),Me=e("ol",{class:"mx-4"},[e("li",{class:"my-1"},"Upvote things that are high quailty, topical, well formed, helpful, and provide solid discussion upon a certain topic. We do not disencentivize discussion."),e("li",{class:"my-1"},"Mark things as misleading when this are not inherently wrong, but might guide someone in the wrong direction, or stray away from the initial topics of the original discussion."),e("li",{class:"my-1"},"Downvote only if something blatantly off topic or contains hateful or discriminatory language or rhetoric. Downvotes are not for disagreements. ")],-1),Fe=[Le,Me];function Oe(n,o){return _(),h("div",Pe,Fe)}var Te=L(Ue,[["render",Oe]]);function K(n){if(n==null)return"\u221E ago";const o=y.now(),t=y.fromISO(n),i=o.diff(t,"minutes").minutes;if(i<60)return`${i.toFixed(0)}m ago`;const c=o.diff(t,"hours").hours;if(c<24)return`${c.toFixed(0)}h ago`;const d=o.diff(t,"days").days;if(d<7)return`${d.toFixed(0)}d ago`;const m=o.diff(t,"weeks").weeks;if(m<4)return`${m.toFixed(0)}w ago`;const s=o.diff(t,"months").months;if(s<12)return`${s.toFixed(0)}m ago`}const Re=n=>(A("data-v-70428c51"),n=n(),E(),n),Ne={key:0},ze={class:"media-left pr-2 m-0"},Ve={class:"container"},Be=["onClick"],De=["onClick"],qe=["onClick"],Ae=["onClick"],Ee={class:"box m-0 is-shadowless has-background-light p-2"},He={class:"title is-5 has-text-weight-semibold m-0"},Ye={class:"level-left pt-1"},Je={class:"tag mb-1 mr-1 is-light has-text-weight-medium is-link"},Ke={class:"tag mb-1 mr-1 is-primary has-text-weight-medium is-light"},je={class:"tag mb-1 mr-1 is-info has-text-weight-medium is-light"},We={key:1,class:"box content m-5"},Ge=Re(()=>e("i",null,"There are no posts yet...",-1)),Xe=[Ge],Qe=k({props:{posts:null},setup(n){const o=R("toggleModal");function t(s){return s>999999?(s/1e6).toFixed(0)+"m":s>999?(s/1e3).toFixed(0)+"k":s}function i(s){if(!p.state.session.authenticated){o("You must be logged in to vote","Please login or create an account to interact with others");return}s.votes.upvotes.includes(p.getters.getCurrentUserId)||s.votes.upvotes.push(p.getters.getCurrentUserId),s.votes.misleading.includes(p.getters.getCurrentUserId)&&(s.votes.misleading=s.votes.misleading.filter(r=>r!==p.getters.getCurrentUserId)),s.votes.downvotes.includes(p.getters.getCurrentUserId)&&(s.votes.downvotes=s.votes.downvotes.filter(r=>r!==p.getters.getCurrentUserId)),C.patch(`https://doxforeverything.herokuapp.com/posts/${s.post_id}/votes`,new URLSearchParams({votes:JSON.stringify(s.votes)}))}function c(s){if(!p.state.session.authenticated){o("You must be logged in to vote","Please login or create an account to interact with others");return}s.votes.upvotes.includes(p.getters.getCurrentUserId)&&(s.votes.upvotes=s.votes.upvotes.filter(r=>r!==p.getters.getCurrentUserId)),s.votes.misleading.includes(p.getters.getCurrentUserId)||s.votes.misleading.push(p.getters.getCurrentUserId),s.votes.downvotes.includes(p.getters.getCurrentUserId)&&(s.votes.downvotes=s.votes.downvotes.filter(r=>r!==p.getters.getCurrentUserId)),C.patch(`https://doxforeverything.herokuapp.com/posts/${s.post_id}/votes`,new URLSearchParams({votes:JSON.stringify(s.votes)}))}function d(s){if(!p.state.session.authenticated){o("You must be logged in to vote","Please login or create an account to interact with others");return}s.votes.upvotes.includes(p.getters.getCurrentUserId)&&(s.votes.upvotes=s.votes.upvotes.filter(r=>r!==p.getters.getCurrentUserId)),s.votes.misleading.includes(p.getters.getCurrentUserId)&&(s.votes.misleading=s.votes.misleading.filter(r=>r!==p.getters.getCurrentUserId)),s.votes.downvotes.includes(p.getters.getCurrentUserId)||s.votes.downvotes.push(p.getters.getCurrentUserId),C.patch(`https://doxforeverything.herokuapp.com/posts/${s.post_id}/votes`,new URLSearchParams({votes:JSON.stringify(s.votes)}))}function m(s){O.push(`/posts/${s.post_id}`)}return(s,r)=>n.posts.length>0?(_(),h("div",Ne,[(_(!0),h(F,null,T(n.posts,l=>{var a,v,u,$;return _(),h("div",{class:"media box is-clickable p-2 my-2",key:l.post_id},[e("div",ze,[e("div",Ve,[e("p",{onClick:b=>i(l),class:"vote is-size-8 has-text-centered has-text-weight-bold has-text-primary"},g(t((a=l.votes)==null?void 0:a.upvotes.length)),9,Be),e("p",{onClick:b=>c(l),class:"vote is-size-6 has-text-centered has-text-weight-bold has-text-warning"},g(t((v=l.votes)==null?void 0:v.misleading.length)),9,De),e("p",{onClick:b=>d(l),class:"vote is-size-6 has-text-centered has-text-weight-bold has-text-danger"},g(t((u=l.votes)==null?void 0:u.downvotes.length)),9,qe)])]),e("div",{class:"media-content",onClick:b=>m(l)},[e("div",Ee,[e("p",He,g(l.title),1)]),e("div",Ye,[(_(!0),h(F,null,T(l==null?void 0:l.topics,b=>(_(),h("p",Je,g(b),1))),256)),e("p",Ke,"u/"+g(($=l.user)==null?void 0:$.username),1),e("p",je,g(I(K)(l.time)),1)])],8,Ae)])}),128))])):(_(),h("div",We,Xe))}});var Q=L(Qe,[["__scopeId","data-v-70428c51"]]);const Ze={class:"columns p-2"},et={class:"column"},tt={class:"level-left"},st=["onClick"],ot={class:"column is-4"},nt=k({setup(n){J(async()=>{try{const a=await C.get("https://doxforeverything.herokuapp.com/posts");t.value=a.data,t.value=l(t.value,"hot"),i.value=t.value.filter(v=>v.topics.some(u=>{var $;return($=p.state.session.user)==null?void 0:$.topics.includes(u)})),i.value=l(i.value,"hot"),o.value=t.value}catch(a){console.log(a),d("Failed to load posts...","Server may be in a non-functioning state.")}});const o=f([]),t=f([]),i=f([]),c=f(""),d=R("toggleModal"),m=f("All");function s(){switch(m.value){case"All":m.value="Feed",t.value=o.value,o.value=i.value;break;case"Feed":m.value="All",i.value=o.value,o.value=t.value;break}}function r(a){c.value=a,o.value=l(o.value,a)}function l(a,v){return a.sort((u,$)=>{if(v=="new"){const b=y.fromISO(u.time),S=y.fromISO($.time);return b<S?1:-1}else if(v=="top"){const b=u.votes.upvotes.length-u.votes.downvotes.length-u.votes.misleading.length/2;console.log(b);const S=$.votes.upvotes.length-$.votes.downvotes.length-$.votes.misleading.length/2;return console.log(S),b===S?y.fromISO(u.time)<y.fromISO($.time)?1:-1:b<S?1:-1}else if(v=="hot"){const b=y.now().diff(y.fromISO(u.time),"days").days,S=y.now().diff(y.fromISO($.time),"days").days,z=(u.votes.upvotes.length-u.votes.downvotes.length-u.votes.misleading.length/2)/(b+1),V=($.votes.upvotes.length-$.votes.downvotes.length-$.votes.misleading.length/2)/(S+1);return z<V?1:-1}else return 0}),a}return(a,v)=>(_(),h("div",Ze,[e("div",et,[e("div",tt,[e("button",{onClick:w(s,["prevent"]),class:"level-item button is-primary has-text-weight-bold"},g(m.value),9,st),x(q,{class:"level-item",onSort:r})]),x(Q,{posts:o.value},null,8,["posts"])]),e("div",ot,[x(Te)])]))}});var it=L(nt,[["__scopeId","data-v-499f1b86"]]);const at={key:0},lt={class:"card is-shadowless"},ct={class:"card-header is-shadowless has-background-grey-lighter"},rt={class:"card-header-title level-left p-3"},dt={class:"level-left tags"},ut={class:"tag is-light is-success"},vt={class:"tag is-light is-warning"},_t={class:"tag is-light is-danger"},ht={class:"tag is-light is-info"},mt={class:"message-body p-2"},pt={key:1,class:"box content m-5"},gt=e("i",null,"There are no comments yet...",-1),ft=[gt],Z=k({props:{comments:null},setup(n){return R("toggleModal"),(o,t)=>n.comments.length>0?(_(),h("div",at,[(_(!0),h(F,null,T(n.comments,i=>{var c;return _(),h("div",{class:"block my-0",key:i.comment_id},[e("div",lt,[e("div",ct,[e("p",rt,"u/"+g((c=i.user)==null?void 0:c.username),1),e("div",dt,[e("p",ut,g(i.votes.upvotes),1),e("p",vt,g(i.votes.misleading),1),e("p",_t,g(i.votes.downvotes),1),e("p",ht,g(I(K)(i.time)),1)])]),e("div",mt,[e("p",null,g(i.content),1)])])])}),128))])):(_(),h("div",pt,ft))}}),$t={class:"box m-2"},bt={class:"block"},yt={class:"title is-4 mb-2"},wt={class:"tags"},xt={class:"tag mb-1 mr-1 is-light is-primary"},kt={class:"tag mb-1 mr-1 is-light is-warning"},Ct={class:"tag mb-1 mr-1 is-light is-danger"},St={class:"tag mb-1 mr-1 is-light is-info"},It={class:"tag mb-1 mr-1 is-light is-info"},Ut={class:"tag mb-1 mr-1 is-light is-primary"},Pt={class:"box py-5 my-5 has-background-light is-shadowless"},Lt={key:0,class:"block"},Mt={key:0,class:"field is-grouped"},Ft={class:"buttons"},Ot={key:1,class:"fields"},Tt={class:"field"},Rt={class:"control"},Nt={class:"field buttons is-grouped"},zt={class:"control"},Vt=["onClick"],Bt={key:1,class:"box has-background-danger has-text-weight-semibold"},Dt=e("p",null,"You must be logged in to participate",-1),qt=[Dt],At={class:"box m-2"},Et=k({setup(n){const o=oe(),t=f(),i=f([]),c=f(""),d=f(!1),m=H(()=>p.state.session);function s(){d.value=!d.value}async function r(){var l,a,v,u;await C.post("https://doxforeverything.herokuapp.com/newComment",new URLSearchParams({user_id:p.getters.getSession.user.user_id,post_id:String((l=t.value)==null?void 0:l.post_id),reply_to:String((a=t.value)==null?void 0:a.post_id),content:c.value})),i.value.push({comment_id:0,user_id:p.getters.getSession.user.user_id,user:p.getters.getCurrentUser,post_id:Number((v=t.value)==null?void 0:v.post_id),reply_to:Number((u=t.value)==null?void 0:u.post_id),content:c.value,time:"",votes:{upvotes:[],misleading:[],downvotes:[]}}),s(),c.value=""}return J(async()=>{const l=await C.get(`https://doxforeverything.herokuapp.com/posts/${o.params.post_id}`);t.value=l.data;const a=await C.get(`https://doxforeverything.herokuapp.com/posts/${o.params.post_id}/comments`);i.value=a.data}),(l,a)=>{var v,u,$,b,S,z,V,j,W;return _(),h(F,null,[e("div",$t,[e("div",bt,[e("h2",yt,g((v=t.value)==null?void 0:v.title),1),e("div",wt,[e("p",xt,g((u=t.value)==null?void 0:u.votes.upvotes),1),e("p",kt,g(($=t.value)==null?void 0:$.votes.misleading),1),e("p",Ct,g((b=t.value)==null?void 0:b.votes.downvotes),1),e("p",St,g(I(K)((S=t.value)==null?void 0:S.time)),1),e("p",It,"u/"+g((V=(z=t.value)==null?void 0:z.user)==null?void 0:V.username),1),(_(!0),h(F,null,T((j=t.value)==null?void 0:j.topics,Y=>(_(),h("p",Ut,g(Y),1))),256))])]),e("div",Pt,[e("p",null,g((W=t.value)==null?void 0:W.content),1)]),I(m).authenticated?(_(),h("div",Lt,[d.value?B("",!0):(_(),h("div",Mt,[e("div",Ft,[e("button",{class:"button is-light is-primary",onClick:s},"Comment"),e("button",{class:"button is-light is-info",onClick:a[0]||(a[0]=()=>{})},"Share"),e("button",{class:"button is-light is-danger",onClick:a[1]||(a[1]=()=>{})},"Report")])])),d.value?(_(),h("form",Ot,[e("div",Tt,[e("div",Rt,[U(e("textarea",{class:"textarea",rows:"5","onUpdate:modelValue":a[2]||(a[2]=Y=>c.value=Y)},null,512),[[P,c.value]])])]),e("div",Nt,[e("div",zt,[e("button",{class:"button is-primary",onClick:w(r,["prevent"])},"Submit",8,Vt),e("button",{class:"button is-danger",onClick:s},"Cancel")])])])):B("",!0)])):(_(),h("div",Bt,qt))]),e("div",At,[x(q),x(Z,{comments:i.value},null,8,["comments"])])],64)}}}),Ht={};function Yt(n,o){return _(),h("p",null,"404: page not found...")}var Jt=L(Ht,[["render",Yt]]);const Kt={};function jt(n,o){return _(),h("h1",null,"About!")}var Wt=L(Kt,[["render",jt]]);const Gt={class:"control"},Xt={class:"tags has-addons"},Qt={class:"tag tag-content p-2 is-medium is-primary is-light"},Zt=k({props:{contents:null},emits:["submit","delete"],setup(n){return(o,t)=>(_(),h("div",Gt,[e("div",Xt,[e("div",Qt,g(n.contents),1),e("div",{class:"tag is-medium is-danger is-light is-delete",onClick:t[0]||(t[0]=w(i=>o.$emit("delete",n.contents),["prevent"]))})])]))}});var es=L(Zt,[["__scopeId","data-v-56ed16be"]]);const ts={key:0,class:"box m-2 has-background-light"},ss={class:"field"},os={class:"control"},ns=e("p",{class:"title is-3 mb-4"},"Title",-1),is={class:"field"},as={class:"control"},ls=e("p",{class:"subtitle is-4 mb-2"},"Content",-1),cs={class:"field"},rs={class:"control"},ds=e("p",{class:"subtitle is-4 mb-2"},"Topics",-1),us={class:"field is-grouped is-grouped-multiline"},vs=["onKeyup"],_s={class:"field"},hs={class:"control"},ms=["onClick"],ps={key:1,class:"box m-5"},gs=e("p",null,"You must create an account to post...",-1),fs=[gs],$s=k({setup(n){const o=H(()=>p.state.session),t=f(""),i=f(""),c=f(""),d=f([]),m=R("toggleModal");function s(){if(d.value.length>=5){m("You can only have 5 topics","Try to be more specific with which topics you choose.");return}d.value.push(c.value),c.value=""}function r(a){d.value.splice(d.value.indexOf(a),1)}async function l(){if(t.value==""||i.value==""){m("Fill in all of the boxes...","You must supply a title and some content. Don't forget to fill out both!");return}try{const a=await C.post("https://doxforeverything.herokuapp.com/newPost",new URLSearchParams({title:t.value,content:i.value,topics:JSON.stringify(d.value),user_id:p.getters.getSession.user.user_id}));console.log(a.data),O.push(`/posts/${a.data.post_id}`)}catch(a){console.log(a),m("Failed to upload post...")}}return(a,v)=>I(o).authenticated?(_(),h("div",ts,[e("div",ss,[e("div",os,[ns,U(e("input",{class:"input","onUpdate:modelValue":v[0]||(v[0]=u=>t.value=u)},null,512),[[P,t.value]])])]),e("div",is,[e("div",as,[ls,U(e("textarea",{class:"textarea",rows:"8","onUpdate:modelValue":v[1]||(v[1]=u=>i.value=u)},null,512),[[P,i.value]])])]),e("div",cs,[e("div",rs,[ds,e("div",us,[(_(!0),h(F,null,T(d.value,u=>(_(),G(es,{contents:u,onDelete:r},null,8,["contents"]))),256))]),U(e("input",{type:"text",class:"input","onUpdate:modelValue":v[2]||(v[2]=u=>c.value=u),onKeyup:ne(s,["enter"])},null,40,vs),[[P,c.value]])])]),e("div",_s,[e("div",hs,[e("button",{class:"button",onClick:w(l,["prevent"])},"Post",8,ms)])])])):(_(),h("div",ps,fs))}}),bs=k({setup(n){return(o,t)=>(_(),G($s))}});const N=n=>(A("data-v-3a43b11e"),n=n(),E(),n),ys={key:0},ws={class:"level box my-2 p-4 is-mobile"},xs={class:"level-left"},ks=N(()=>e("div",{class:"level-item"},[e("figure",{class:"image is-96x96"},[e("img",{src:"https://bulma.io/images/placeholders/96x96.png"})])],-1)),Cs={class:"level-item"},Ss={class:"title my-2"},Is={class:"box mb-2"},Us=N(()=>e("p",{class:"title"},"Topics",-1)),Ps={class:"field is-grouped is-grouped-multiline"},Ls={class:"control"},Ms={class:"tags has-addons"},Fs={class:"tag"},Os=N(()=>e("div",{class:"tag"},[e("i",{class:"fa-solid fa-xmark"})],-1)),Ts=ie('<div class="control" data-v-3a43b11e><div class="tags has-addons" data-v-3a43b11e><div class="tag" data-v-3a43b11e></div><div class="tag" data-v-3a43b11e><i class="fa-solid fa-plus" data-v-3a43b11e></i></div></div></div>',1),Rs={class:"box my-2 p-4"},Ns=N(()=>e("p",{class:"title"},"Posts",-1)),zs={class:"scrollable p-2"},Vs={class:"box my-2"},Bs=N(()=>e("p",{class:"title"},"Comments",-1)),Ds={class:"scrollable p-2"},qs={key:1,class:"box m-5"},As=N(()=>e("p",null,"Not logged in.",-1)),Es=[As],Hs=k({setup(n){const o=H(()=>p.state.session),t=f([]),i=f([]),c=f("");J(async()=>{var a,v;const r=await C.get(`https://doxforeverything.herokuapp.com/users/${(a=o.value.user)==null?void 0:a.user_id}/posts`);t.value=r.data;const l=await C.get(`https://doxforeverything.herokuapp.com/users/${(v=o.value.user)==null?void 0:v.user_id}/comments`);i.value=l.data,d("top")});function d(r){c.value=r,t.value=m(t.value,r)}function m(r,l){return r.sort((a,v)=>{if(l=="new"){const u=y.fromISO(a.time),$=y.fromISO(v.time);return u<$?1:-1}else if(l=="top"){const u=a.votes.upvotes.length-a.votes.downvotes.length-a.votes.misleading.length/2;console.log(u);const $=v.votes.upvotes.length-v.votes.downvotes.length-v.votes.misleading.length/2;return console.log($),u===$?y.fromISO(a.time)<y.fromISO(v.time)?1:-1:u<$?1:-1}else if(l=="hot"){const u=y.now().diff(y.fromISO(a.time),"days").days,$=y.now().diff(y.fromISO(v.time),"days").days,b=(a.votes.upvotes.length-a.votes.downvotes.length-a.votes.misleading.length/2)/(u+1),S=(v.votes.upvotes.length-v.votes.downvotes.length-v.votes.misleading.length/2)/($+1);return b<S?1:-1}else return 0}),r}function s(){}return(r,l)=>{var a,v,u;return I(o).authenticated?(_(),h("div",ys,[e("div",ws,[e("div",xs,[ks,e("div",Cs,[e("div",null,[e("p",Ss,g((a=I(o).user)==null?void 0:a.username),1),e("p",null,g((v=I(o).user)==null?void 0:v.email),1)])])])]),e("div",Is,[Us,e("div",Ps,[(_(!0),h(F,null,T((u=I(o).user)==null?void 0:u.topics,$=>(_(),h("div",Ls,[e("div",Ms,[e("div",Fs,g($),1),Os])]))),256)),Ts])]),e("div",Rs,[Ns,e("div",zs,[x(q,{onSort:m}),x(Q,{posts:t.value},null,8,["posts"])])]),e("div",Vs,[Bs,e("div",Ds,[x(q,{onSort:s}),x(Z,{comments:i.value},null,8,["comments"])])])])):(_(),h("div",qs,Es))}}});var Ys=L(Hs,[["__scopeId","data-v-3a43b11e"]]);const Js={class:"columns my-6 is-centered"},Ks={class:"column box p-6 is-5"},js={class:"field"},Ws=e("label",{class:"label"},"Email",-1),Gs={class:"control"},Xs={class:"field"},Qs=e("label",{class:"label"},"Username",-1),Zs={class:"control"},eo={class:"field"},to=e("label",{class:"label"},"Password",-1),so={class:"control"},oo={class:"field"},no=e("label",{class:"label"},"Confirm Password",-1),io={class:"control"},ao={class:"field columns is-centered is-grouped mt-6"},lo={class:"control"},co=["onClick"],ro=e("div",{class:"control"},[e("button",{class:"button is-danger"},"Cancel")],-1),uo=k({setup(n){const o=R("toggleModal"),t=f(""),i=f(""),c=f(""),d=f("");f(!0);async function m(){try{const r=await C.post("https://doxforeverything.herokuapp.com/authenticate",new URLSearchParams({username:i.value,password:c.value}));p.commit("login",r.data),i.value="",c.value="",O.push("/")}catch(r){console.log(r),o("Failed to login...","Double check you typed in your username and password correctly")}}async function s(){if(t.value==""||i.value==""||c.value==""||d.value==""){o("Please supply all fields to register.");return}if(c.value!=d.value){o("Passwords do not match.");return}try{const r=await C.post("https://doxforeverything.herokuapp.com/newUser",new URLSearchParams({email:t.value,username:i.value,password:await ae.hash(c.value,10)}))}catch{o("Failed to register user.");return}m()}return(r,l)=>(_(),h("div",Js,[e("form",Ks,[e("div",js,[Ws,e("div",Gs,[U(e("input",{class:"input",required:"",type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>t.value=a)},null,512),[[P,t.value]])])]),e("div",Xs,[Qs,e("div",Zs,[U(e("input",{class:"input",required:"",type:"text","onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a)},null,512),[[P,i.value]])])]),e("div",eo,[to,e("div",so,[U(e("input",{class:"input",required:"",type:"password","onUpdate:modelValue":l[2]||(l[2]=a=>c.value=a)},null,512),[[P,c.value]])])]),e("div",oo,[no,e("div",io,[U(e("input",{class:"input",required:"",type:"password","onUpdate:modelValue":l[3]||(l[3]=a=>d.value=a)},null,512),[[P,d.value]])])]),e("div",ao,[e("div",lo,[e("button",{class:"button is-primary",onClick:w(s,["prevent"])},"Register",8,co)]),ro])])]))}}),O=le({history:ce(),routes:[{name:"Home",path:"/",component:it},{name:"About",path:"/about",component:Wt},{name:"Post",path:"/posts/:post_id",component:Et},{name:"Editor",path:"/editor",component:bs},{name:"Register",path:"/register",component:uo},{name:"Profile",path:"/profile",component:Ys},{name:"404",path:"/*",component:Jt}]});const ee=n=>(A("data-v-29a90191"),n=n(),E(),n),vo=ee(()=>e("div",{class:"modal-background"},null,-1)),_o={class:"modal-content message is-info is-large mx-6"},ho={class:"message-header"},mo=ee(()=>e("p",null,"Login",-1)),po={class:"message-body p-6"},go={class:"fields px-6"},fo={class:"field py-1"},$o={class:"control"},bo={class:"field py-1"},yo={class:"control"},wo={class:"field py-1 is-grouped is-grouped-centered"},xo={class:"control buttons"},ko=k({props:{showLogin:{type:Boolean}},emits:["openLogin","closeLogin"],setup(n,{emit:o}){const t=f(""),i=f(""),c=R("toggleModal");function d(s){o("closeLogin"),O.push(s)}async function m(){try{const s=await C.post("https://doxforeverything.herokuapp.com/authenticate",new URLSearchParams({username:t.value,password:i.value}));p.commit("login",s.data),t.value="",i.value="",o("closeLogin"),O.push("/")}catch(s){console.log(s),c("Failed to login...","Double check you typed in your username and password correctly")}}return(s,r)=>(_(),h("div",{class:D(["modal",{"is-active":n.showLogin}])},[vo,e("div",_o,[e("div",ho,[mo,e("button",{class:"delete",onClick:r[0]||(r[0]=w(l=>s.$emit("closeLogin"),["prevent"]))})]),e("div",po,[e("form",go,[e("div",fo,[e("div",$o,[U(e("input",{class:"input is-medium",type:"username",placeholder:"username","onUpdate:modelValue":r[1]||(r[1]=l=>t.value=l),required:""},null,512),[[P,t.value]])])]),e("div",bo,[e("div",yo,[U(e("input",{class:"input is-medium",type:"password",placeholder:"password","onUpdate:modelValue":r[2]||(r[2]=l=>i.value=l),required:""},null,512),[[P,i.value]])])]),e("div",wo,[e("div",xo,[e("button",{type:"submit",class:"button is-medium is-primary",onClick:r[3]||(r[3]=w(l=>m(),["prevent"]))},"Login"),e("button",{class:"button is-danger is-medium",onClick:r[4]||(r[4]=w(l=>d("/register"),["prevent"]))},"Register")])])])])])],2))}});var Co=L(ko,[["__scopeId","data-v-29a90191"]]);const M=n=>(A("data-v-9a6ea526"),n=n(),E(),n),So={class:"navbar has-background-primary"},Io={class:"navbar-brand"},Uo=M(()=>e("div",{class:"icon-text"},[e("span",{class:"icon is-medium"},[e("i",{class:"fa-solid fa-box-archive"})]),e("span",{class:"my-auto"},"DOX")],-1)),Po=M(()=>e("p",{class:"navbar-item is-size-4 has-text-weight-semibold pl-0"},"For Everything",-1)),Lo=["onClick"],Mo=M(()=>e("span",{"aria-hidden":"true"},null,-1)),Fo=M(()=>e("span",{"aria-hidden":"true"},null,-1)),Oo=M(()=>e("span",{"aria-hidden":"true"},null,-1)),To=[Mo,Fo,Oo],Ro={key:0,class:"navbar-end"},No=M(()=>e("span",{class:"icon"},[e("i",{class:"fa-solid fa-house"})],-1)),zo=M(()=>e("span",null,"Home",-1)),Vo=[No,zo],Bo=["onClick"],Do=M(()=>e("span",{class:"icon"},[e("i",{class:"fa-solid fa-right-to-bracket"})],-1)),qo=M(()=>e("span",null,"Login",-1)),Ao=[Do,qo],Eo={key:1,class:"navbar-end"},Ho=["onClick"],Yo=k({setup(n){const o=H(()=>p.state.session),t=f(!1),i=f(!1);function c(){i.value=!i.value}function d(){t.value=!t.value}function m(r){t.value=!1,O.push(r)}function s(){p.commit("logout"),O.push("/")}return(r,l)=>{var v;const a=X("router-link");return _(),h(F,null,[x(Co,{"show-login":i.value,onCloseLogin:c},null,8,["show-login"]),e("nav",So,[e("div",Io,[x(a,{to:"/",class:"navbar-item my-auto is-size-2 has-text-weight-bold has-text-dark pr-2"},{default:re(()=>[Uo]),_:1}),Po,e("div",{class:D(["navbar-burger button m-3 ml-auto",{"is-active":t.value}]),onClick:w(d,["prevent"])},To,10,Lo)]),e("div",{class:D(["navbar-menu p-1",{"is-active":t.value}])},[I(o).authenticated?(_(),h("div",Eo,[e("a",{class:"navbar-item is-size-5 has-text-weight-semibold",onClick:l[1]||(l[1]=w(u=>m("/"),["prevent"]))},"Home"),e("a",{class:"navbar-item is-size-5 has-text-weight-semibold",onClick:l[2]||(l[2]=w(u=>m("/editor"),["prevent"]))},"Post"),e("a",{class:"navbar-item is-size-5 has-text-weight-semibold",onClick:l[3]||(l[3]=w(u=>m("/profile"),["prevent"]))},"Profile - "+g((v=I(o).user)==null?void 0:v.username),1),e("a",{class:"navbar-item is-size-5 has-text-weight-semibold",onClick:w(s,["prevent"])},"Logout",8,Ho)])):(_(),h("div",Ro,[e("a",{class:"icon-text navbar-item is-size-5 has-text-weight-semibold",onClick:l[0]||(l[0]=w(u=>m("/"),["prevent"]))},Vo),e("a",{class:"icon-text navbar-item is-size-5 has-text-weight-semibold",onClick:w(c,["prevent"])},Ao,8,Bo)]))],2)])],64)}}});var Jo=L(Yo,[["__scopeId","data-v-9a6ea526"]]);const Ko={class:"has-background-light"},jo={class:"container"},Wo=k({setup(n){const o=f(!1),t=f(""),i=f(""),c=f("");function d(m,s,r){m&&(t.value=m),s&&(i.value=s),r&&(c.value=r),o.value=!o.value}return de("toggleModal",d),(m,s)=>{const r=X("router-view");return _(),h("div",Ko,[x(Jo),e("div",jo,[x(r)]),x($e,{"show-modal":o.value,"modal-title":t.value,"modal-content":i.value,"modal-footer":c.value,onToggleModal:d},null,8,["show-modal","modal-title","modal-content","modal-footer"])])}}});ue(Wo).use(O).use(p).mount("#app");
