import{d as f,o as c,c as d,a as e,t as _,w as k,b as L,n as j,e as W,f as G,g as K,i as N,r as D,F as R,h as v,j as T,k as $,l as g,u as X,m as b,v as y,p as I,q as C,s as J,x as Q,y as Z,z as ee,A as te,B as se,C as A,D as V,E,G as oe,H as ne}from"./vendor.62e4ae61.js";const ae=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}};ae();const le=e("div",{class:"modal-background"},null,-1),ie={class:"modal-card"},re={key:0,class:"modal-card-head"},ce={class:"modal-card-title"},ue={key:1,class:"modal-card-body"},de={key:2,class:"modal-card-foot"},pe=f({props:{showModal:Boolean,modalTitle:String,modalContent:String,modalFooter:String},emits:["toggleModal"],setup(l){return(a,t)=>(c(),d("div",{class:j(["modal",{"is-active":l.showModal}])},[le,e("div",ie,[l.modalTitle?(c(),d("div",re,[e("p",ce,_(l.modalTitle),1),e("button",{class:"delete",onClick:t[0]||(t[0]=k(n=>a.$emit("toggleModal"),["prevent"]))})])):L("",!0),l.modalContent?(c(),d("div",ue,[e("p",null,_(l.modalContent),1)])):L("",!0),l.modalFooter?(c(),d("div",de,[e("p",null,_(l.modalFooter),1)])):L("",!0)])],2))}});var F=(l,a)=>{const t=l.__vccOpts||l;for(const[n,s]of a)t[n]=s;return t};const me={},_e={class:"box content"},ve=W('<h2>Popular Topics</h2><ul class="mx-4"><li class="my-1">TypeScript</li><li class="my-1">Vue</li><li class="my-1">C#</li><li class="my-1">Python</li><li class="my-1">Unity</li></ul><h2>Places</h2><ul class="mx-4"><li class="my-1">Profile</li><li class="my-1">Hot</li><li class="my-1">Local</li><li class="my-1">Top Ever</li></ul><h2>Rules</h2><ol class="mx-4"><li class="my-1">Upvote things that are high quailty, topical, well formed, helpful, and provide solid discussion upon a certain topic. We do not disencentivize discussion.</li><li class="my-1">Mark things as misleading when this are not inherently wrong, but might guide someone in the wrong direction, or stray away from the initial topics of the original discussion.</li><li class="my-1">Downvote only if something blatantly off topic or contains hateful or discriminatory language or rhetoric. Downvotes are not for disagreements. </li></ol>',6),he=[ve];function ge(l,a){return c(),d("div",_e,he)}var fe=F(me,[["render",ge]]);const be={state:{session:{user:null,authenticated:!1}},plugins:[G({storage:sessionStorage})],getters:{getSession(l){return l.session},getCurrentUser(l){return l.session.user},getCurrentUserId(l){return l.session.user?l.session.user.user_id:-1}},mutations:{login(l,a){l.session=a},logout(l){l.session.authenticated=!1}}},h=K(be);const ye={class:"media-left mr-0 mb-auto"},$e={class:"container p-2"},xe=["onClick"],we=["onClick"],ke=["onClick"],Ce=["onClick"],Pe={class:"card-header has-background-light"},Se={class:"card-header-title is-size-4 p-1 px-4"},Ue={class:"tags py-2"},Me={class:"tag is-medium is-primary is-light"},Ve={class:"tag is-medium is-info is-light"},Le=f({props:{posts:null},setup(l){const a=N("toggleModal");function t(o){return o>999?(o/1e3).toFixed(0)+"k":o}function n(o){if(!h.getters.getSession.authenticated)return a("You must be logged in to vote."),!1;const p=h.getters.getCurrentUserId;return o.votes.users.includes(p)?(a("You may only vote on a post once."),!1):!0}function s(o){!n(o)||(console.log("Upvoted post!"),o.votes.upvotes+=1,o.votes.users.push(h.getters.getCurrentUserId))}function i(o){!n(o)||(console.log("Post marked misleading..."),o.votes.misleading+=1,o.votes.users.push(h.getters.getCurrentUserId))}function r(o){!n(o)||(console.log("Downvoted post!"),o.votes.downvotes+=1,o.votes.users.push(h.getters.getCurrentUserId))}function u(o){M.push(`/posts/${o.post_id}`)}return(o,p)=>(c(!0),d(R,null,D(l.posts,m=>{var x,P,S,U;return c(),d("div",{class:"media box p-0 my-4",key:m.post_id},[e("div",ye,[e("div",$e,[e("p",{onClick:w=>s(m),class:"vote is-size-6 has-text-centered has-text-weight-bold has-text-primary"},_(t((x=m.votes)==null?void 0:x.upvotes)),9,xe),e("p",{onClick:w=>i(m),class:"vote is-size-6 has-text-centered has-text-weight-bold has-text-warning"},_(t((P=m.votes)==null?void 0:P.misleading)),9,we),e("p",{onClick:w=>r(m),class:"vote is-size-6 has-text-centered has-text-weight-bold has-text-danger"},_(t((S=m.votes)==null?void 0:S.downvotes)),9,ke)])]),e("div",{class:"media-content",onClick:w=>u(m)},[e("header",Pe,[e("p",Se,_(m.title),1)]),e("div",Ue,[e("span",Me,"u/"+_((U=m.user)==null?void 0:U.username),1),e("span",Ve,_(m.time),1)])],8,Ce)])}),128))}});var O=F(Le,[["__scopeId","data-v-a1ce0f28"]]);const Ne={class:"navbar box p-1 is-flex is-flex-direction-row"},Re={class:"navbar-brand"},Fe=f({emits:["sort"],setup(l){return(a,t)=>(c(),d("div",Ne,[e("div",Re,[e("p",{class:"navbar-item px-4",onClick:t[0]||(t[0]=n=>a.$emit("sort","hot"))},"Hot"),e("p",{class:"navbar-item px-4",onClick:t[1]||(t[1]=n=>a.$emit("sort","top"))},"Top"),e("p",{class:"navbar-item px-4",onClick:t[2]||(t[2]=n=>a.$emit("sort","new"))},"New")])]))}}),Te={class:"columns p-4"},Ie={class:"column"},Be={class:"column is-4"},qe=f({setup(l){const a=v([]);function t(n){a.value.sort((s,i)=>{if(n=="new")return s.time<i.time?1:-1;if(n=="top"){const r=s.votes.upvotes-s.votes.downvotes-s.votes.misleading/2,u=i.votes.upvotes-i.votes.downvotes-i.votes.misleading/2;return r<u?1:-1}else return 0})}return T(async()=>{const n=await $.get("https://doxforeverything.herokuapp.com/posts");a.value=n.data,t("top")}),(n,s)=>(c(),d("div",Te,[e("div",Ie,[g(Fe,{onSort:t}),g(O,{posts:a.value},null,8,["posts"])]),e("div",Be,[g(fe)])]))}}),ze={};function De(l,a){return c(),d("h1",null,"About!")}var Ae=F(ze,[["render",De]]);const Ee={key:0,class:"box m-5"},Oe={key:1,class:"box content m-5"},He=e("i",null,"There are no comments yet...",-1),Ye=[He],H=f({props:{comments:null},setup(l){return(a,t)=>l.comments.length>0?(c(),d("div",Ee,[(c(!0),d(R,null,D(l.comments,n=>{var s;return c(),d("div",{class:"block content",key:n.comment_id},[e("h5",null,"u/"+_((s=n.user)==null?void 0:s.username),1),e("p",null,_(n.content),1)])}),128))])):(c(),d("div",Oe,Ye))}}),je={class:"box m-5 has-background-light"},We={class:"block content"},Ge={class:"mb-1"},Ke={class:"is-flex is-flex-direction-row"},Xe={class:"has-text-primary"},Je={class:"has-text-warning px-4"},Qe={class:"has-text-danger pr-4"},Ze={class:"block"},et={class:"block"},tt={key:0},st=f({setup(l){const a=X(),t=v(),n=v([]),s=v(""),i=v(!1);function r(){i.value=!i.value}async function u(){var o,p,m,x;await $.post("https://doxforeverything.herokuapp.com/newComment",new URLSearchParams({user_id:h.getters.getSession.user.user_id,post_id:String((o=t.value)==null?void 0:o.post_id),reply_to:String((p=t.value)==null?void 0:p.post_id),content:s.value})),n.value.push({comment_id:0,user_id:h.getters.getSession.user.user_id,user:h.getters.getCurrentUser,post_id:Number((m=t.value)==null?void 0:m.post_id),reply_to:Number((x=t.value)==null?void 0:x.post_id),content:s.value,time:"",votes:{upvotes:1,misleading:0,downvotes:0,users:[]}}),r(),s.value=""}return T(async()=>{const o=await $.get(`https://doxforeverything.herokuapp.com/posts/${a.params.post_id}`);t.value=o.data;const p=await $.get(`https://doxforeverything.herokuapp.com/posts/${a.params.post_id}/comments`);n.value=p.data,console.log(n.value)}),(o,p)=>{var m,x,P,S,U,w,q,z;return c(),d(R,null,[e("div",je,[e("div",We,[e("h2",Ge,_((m=t.value)==null?void 0:m.title),1),e("div",Ke,[e("p",Xe,_((x=t.value)==null?void 0:x.votes.upvotes),1),e("p",Je,_((P=t.value)==null?void 0:P.votes.misleading),1),e("p",Qe,_((S=t.value)==null?void 0:S.votes.downvotes),1),e("p",null,_((U=t.value)==null?void 0:U.time),1),e("p",null,_((q=(w=t.value)==null?void 0:w.user)==null?void 0:q.username),1)]),e("div",Ze,[e("p",null,_((z=t.value)==null?void 0:z.content),1)])]),e("div",et,[e("button",{class:"button is-primary",onClick:r},"Comment"),i.value?(c(),d("div",tt,[b(e("textarea",{cols:"30",rows:"10","onUpdate:modelValue":p[0]||(p[0]=Y=>s.value=Y)},null,512),[[y,s.value]]),e("button",{class:"button",onClick:u},"Submit")])):L("",!0)])]),g(H,{comments:n.value},null,8,["comments"])],64)}}}),ot={key:0,class:"box m-5 has-background-light"},nt={class:"block content"},at=e("h2",null,"Title",-1),lt={class:"block content"},it=e("h4",null,"Content",-1),rt=["onClick"],ct={key:1,class:"box m-5"},ut=e("p",null,"You must create an account to post...",-1),dt=[ut],pt=f({setup(l){const a=I(()=>h.state.session),t=v(""),n=v(""),s=N("toggleModal");async function i(){try{const r=await $.post("https://doxforeverything.herokuapp.com/newPost",new URLSearchParams({title:t.value,content:n.value,user_id:h.getters.getSession.user.user_id}));console.log(r.data),M.push(`/posts/${r.data.post_id}`)}catch(r){console.log(r),s("Failed to upload post...")}}return(r,u)=>C(a).authenticated?(c(),d("form",ot,[e("div",nt,[at,b(e("input",{class:"input","onUpdate:modelValue":u[0]||(u[0]=o=>t.value=o)},null,512),[[y,t.value]])]),e("div",lt,[it,b(e("textarea",{class:"textarea",rows:"12","onUpdate:modelValue":u[1]||(u[1]=o=>n.value=o)},null,512),[[y,n.value]])]),e("button",{class:"button",onClick:k(i,["prevent"])},"Post",8,rt)])):(c(),d("div",ct,dt))}}),mt=f({setup(l){return(a,t)=>(c(),J(pt))}});const B=l=>(Q("data-v-f76ba2de"),l=l(),Z(),l),_t={key:0},vt={class:"box m-5"},ht={class:"title"},gt={class:"box m-5 scrollable"},ft=B(()=>e("p",{class:"title"},"Posts",-1)),bt={class:"box m-5 scrollable"},yt=B(()=>e("p",{class:"title"},"Comments",-1)),$t={key:1,class:"box m-5"},xt=B(()=>e("p",null,"Not logged in.",-1)),wt=[xt],kt=f({setup(l){const a=I(()=>h.state.session),t=v([]),n=v([]);return T(async()=>{var r,u;const s=await $.get(`https://doxforeverything.herokuapp.com/users/${(r=a.value.user)==null?void 0:r.user_id}/posts`);t.value=s.data;const i=await $.get(`https://doxforeverything.herokuapp.com/users/${(u=a.value.user)==null?void 0:u.user_id}/comments`);n.value=i.data}),(s,i)=>{var r;return C(a).authenticated?(c(),d("div",_t,[e("div",vt,[e("p",ht,_((r=C(a).user)==null?void 0:r.username),1)]),e("div",gt,[ft,g(O,{posts:t.value},null,8,["posts"])]),e("div",bt,[yt,g(H,{comments:n.value},null,8,["comments"])])])):(c(),d("div",$t,wt))}}});var Ct=F(kt,[["__scopeId","data-v-f76ba2de"]]);const Pt={class:"columns my-6 is-centered"},St={class:"column box p-6 is-5"},Ut={class:"field"},Mt=e("label",{class:"label"},"Email",-1),Vt={class:"control"},Lt={class:"field"},Nt=e("label",{class:"label"},"Username",-1),Rt={class:"control"},Ft={class:"field"},Tt=e("label",{class:"label"},"Password",-1),It={class:"control"},Bt={class:"field"},qt=e("label",{class:"label"},"Confirm Password",-1),zt={class:"control"},Dt={class:"field columns is-centered is-grouped mt-6"},At={class:"control"},Et=["onClick"],Ot=e("div",{class:"control"},[e("button",{class:"button is-danger"},"Cancel")],-1),Ht={class:"control"},Yt=f({setup(l){const a=N("toggleModal"),t=v(""),n=v(""),s=v(""),i=v("");v(!0);async function r(){if(t.value==""||n.value==""||s.value==""||i.value==""){a("Please supply all fields to register.");return}if(s.value!=i.value){a("Passwords do not match.");return}try{const u=await $.post("https://doxforeverything.herokuapp.com/newUser",new URLSearchParams({email:t.value,username:n.value,password:await ee.hash(s.value,10)}))}catch{a("Failed to register user.");return}a("User registered sucessfully!"),t.value="",n.value="",s.value="",i.value=""}return(u,o)=>(c(),d("div",Pt,[e("form",St,[e("div",Ut,[Mt,e("div",Vt,[b(e("input",{class:"input",required:"",type:"text","onUpdate:modelValue":o[0]||(o[0]=p=>t.value=p)},null,512),[[y,t.value]])])]),e("div",Lt,[Nt,e("div",Rt,[b(e("input",{class:"input",required:"",type:"text","onUpdate:modelValue":o[1]||(o[1]=p=>n.value=p)},null,512),[[y,n.value]])])]),e("div",Ft,[Tt,e("div",It,[b(e("input",{class:"input",required:"",type:"password","onUpdate:modelValue":o[2]||(o[2]=p=>s.value=p)},null,512),[[y,s.value]])])]),e("div",Bt,[qt,e("div",zt,[b(e("input",{class:"input",required:"",type:"password","onUpdate:modelValue":o[3]||(o[3]=p=>i.value=p)},null,512),[[y,i.value]])])]),e("div",Dt,[e("div",At,[e("button",{class:"button is-primary",onClick:k(r,["prevent"])},"Register",8,Et)]),Ot,e("div",Ht,[e("button",{class:"button is-warning",onClick:o[4]||(o[4]=k(p=>C(a)("Failed to do something...","Additional information about the issue","Buttons and stuff"),["prevent"]))},"Modal")])])])]))}}),M=te({history:se(),routes:[{name:"Home",path:"/",component:qe},{name:"About",path:"/about",component:Ae},{name:"Post",path:"/posts/:post_id",component:st},{name:"Editor",path:"/editor",component:mt},{name:"Register",path:"/register",component:Yt},{name:"Profile",path:"/profile",component:Ct}]}),jt={class:"navbar has-background-primary"},Wt={class:"navbar-brand"},Gt=E("DOX"),Kt=e("p",{class:"navbar-item is-size-4 has-text-weight-semibold pl-0"},"For Everything",-1),Xt={class:"navbar-menu is-active"},Jt={class:"navbar-end"},Qt={key:0,class:"navbar-item field is-grouped"},Zt=["onClick"],es=E("Register"),ts={key:1,class:"navbar-item"},ss={class:"button has-text-weight-bold has-background-primary-light"},os=e("button",{class:"button mx-2"},"New Post",-1),ns=["onClick"],as=f({setup(l){const a=I(()=>h.state.session),t=v(""),n=v(""),s=N("toggleModal");async function i(){try{const u=await $.post("https://doxforeverything.herokuapp.com/authenticate",new URLSearchParams({username:t.value,password:n.value}));h.commit("login",u.data),t.value="",n.value="",M.push("/")}catch(u){console.log(u),s("Failed to login...","Double check you typed in your username and password correctly")}}function r(){h.commit("logout"),M.push("/")}return(u,o)=>{const p=A("router-link");return c(),d("nav",jt,[e("div",Wt,[g(p,{class:"navbar-item my-auto is-size-2 has-text-weight-bold has-text-dark",to:"/"},{default:V(()=>[Gt]),_:1}),Kt]),e("div",Xt,[e("div",Jt,[C(a).authenticated?(c(),d("div",ts,[g(p,{to:"/profile"},{default:V(()=>{var m;return[e("button",ss,_((m=C(a).user)==null?void 0:m.username),1)]}),_:1}),g(p,{to:"/editor"},{default:V(()=>[os]),_:1}),e("button",{class:"button",onClick:k(r,["prevent"])},"Logout",8,ns)])):(c(),d("form",Qt,[b(e("input",{class:"input",type:"username",placeholder:"username","onUpdate:modelValue":o[0]||(o[0]=m=>t.value=m),required:""},null,512),[[y,t.value]]),b(e("input",{class:"input ml-2 mr-1",type:"password",placeholder:"password","onUpdate:modelValue":o[1]||(o[1]=m=>n.value=m),required:""},null,512),[[y,n.value]]),e("button",{type:"submit",class:"button ml-1 mr-2",onClick:k(i,["prevent"])},"Login",8,Zt),g(p,{class:"navbar-item button",to:"/register"},{default:V(()=>[es]),_:1})]))])])])}}}),ls=f({setup(l){const a=v(!1),t=v(""),n=v(""),s=v("");function i(r,u,o){r&&(t.value=r),u&&(n.value=u),o&&(s.value=o),a.value=!a.value}return oe("toggleModal",i),(r,u)=>{const o=A("router-view");return c(),d(R,null,[g(as),e("div",null,[g(o)]),g(pe,{"show-modal":a.value,"modal-title":t.value,"modal-content":n.value,"modal-footer":s.value,onToggleModal:i},null,8,["show-modal","modal-title","modal-content","modal-footer"])],64)}}});ne(ls).use(M).use(h).mount("#app");
